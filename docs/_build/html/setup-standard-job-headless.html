

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup Standard Job Headless &mdash; DataSync Historical Documentation pre-1.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="DataSync Historical Documentation pre-1.6 documentation" href="index.html"/>
        <link rel="next" title="Setup Port Job" href="setup-port-job.html"/>
        <link rel="prev" title="Setup Standard Job" href="setup-standard-job.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> DataSync Historical Documentation
          

          
          </a>

          
            
            
              <div class="version">
                pre-1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Main Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick-start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-standard-job.html">Setup Standard Job</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup Standard Job Headless</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-establish-your-configuration-e-g-authentication-details">Step 1: Establish your configuration (e.g. authentication details)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-configure-job-details">Step 2: Configure job details</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-job-output">Step 3: Job Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complete-example-job">Complete example job</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup-port-job.html">Setup Port Job</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup-port-job-headless.html">Setup Port Job Headless</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasync-library-sdk.html">DataSync Library SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling-on-windows-eclipse.html">Compiling on Windows with Eclipse</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiling-with-maven.html">Compiling with Maven</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="resources/checking-log.html">Checking log</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/conditions-restrictions.html">Conditions Restrictions</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/control-config.html">Control Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/faq-common-problems.html">FAQ Common Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/network-considerations.html">Network Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/preferences-config.html">Preferences Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources/schedule-job.html">Schedule a Job</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">DataSync Historical Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Setup Standard Job Headless</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/setup-standard-job-headless.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup-standard-job-headless">
<h1>Setup Standard Job Headless<a class="headerlink" href="#setup-standard-job-headless" title="Permalink to this headline">¶</a></h1>
<p><em>NOTICE</em>: The guide below only pertains to DataSync versions 1.0 and
higher.</p>
<p><em>NOTICE</em>: Before using DataSync in headless mode, we recommend
familiarizing yourself with DataSync through the UI. For information on
using DataSync&#8217;s UI please see <a class="reference external" href="{{%20site.root%20}}/guides/setup-standard-job.html">guide to setup a standard job
(GUI)</a></p>
<p>DataSync&#8217;s command line interface, or &#8220;headless mode,&#8221; enables easy
integration of DataSync into ETL code or other software systems.
DataSync jobs can be run from the command line in one of two ways: (1)
passing job parameters as command-line arguments/flags or (2) running an
.sij file that was previously saved using the user interface. This guide
focuses on (1).</p>
<div class="section" id="step-1-establish-your-configuration-e-g-authentication-details">
<h2>Step 1: Establish your configuration (e.g. authentication details)<a class="headerlink" href="#step-1-establish-your-configuration-e-g-authentication-details" title="Permalink to this headline">¶</a></h2>
<p>Information about your domain, username, password and app token is
required for all DataSync jobs. Note that the user running the job must
have publisher rights on the dataset. A number of other global settings,
such as logging and emailing preferences can also be configured. Please
refer to the <a class="reference external" href="{{%20site.root%20}}/resources/preferences-config.html">configuration
guide</a> to
establish your credentials and preferences.</p>
</div>
<div class="section" id="step-2-configure-job-details">
<h2>Step 2: Configure job details<a class="headerlink" href="#step-2-configure-job-details" title="Permalink to this headline">¶</a></h2>
<p>For general help using DataSync in headless/command-line mode run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="o">&lt;</span><span class="n">DATASYNC_JAR</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>To run a job execute the following command, replacing &lt;..&gt; with the
appropriate values (flags explained below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="o">&lt;</span><span class="n">DATASYNC_JAR</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">c</span> <span class="o">&lt;</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">json</span> <span class="n">FILE</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">f</span> <span class="o">&lt;</span><span class="n">FILE</span> <span class="n">TO</span> <span class="n">PUBLISH</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">h</span> <span class="o">&lt;</span><span class="n">HAS</span> <span class="n">HEADER</span> <span class="n">ROW</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">i</span> <span class="o">&lt;</span><span class="n">DATASET</span> <span class="n">ID</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">m</span> <span class="o">&lt;</span><span class="n">PUBLISH</span> <span class="n">METHOD</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">pf</span> <span class="o">&lt;</span><span class="n">PUBLISH</span> <span class="n">VIA</span> <span class="n">FTP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">pf</span> <span class="o">&lt;</span><span class="n">PUBLISH</span> <span class="n">VIA</span> <span class="n">HTTP</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">cf</span> <span class="o">&lt;</span><span class="n">FTP</span> <span class="n">CONTROL</span><span class="o">.</span><span class="n">json</span> <span class="n">FILE</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Explanation of flags: <code class="docutils literal"><span class="pre">*</span></code> = required flag</p>
<table>
  <thead>
    <tr>
      <th><p>Flag - Short Name</p>
</th>
      <th><p>Flag - Long Name</p>
</th>
      <th><p>Example Values</p>
</th>
      <th><p>Description</p>
</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style='text-align: left;'><p>-c</p>
</td>
      <td style='text-align: left;'><p>&#8211;config</p>
</td>
      <td style='text-align: left;'><p>/Users/home/config.json</p>
</td>
      <td style='text-align: left;'><p>Points to the config.json file you created in Step 1</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-f *</p>
</td>
      <td style='text-align: left;'><p>&#8211;fileToPublish</p>
</td>
      <td style='text-align: left;'><p>/Users/home/data_file.csv</p>
</td>
      <td style='text-align: left;'><p>CSV or TSV file to publish</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-h</p>
</td>
      <td style='text-align: left;'><p>&#8211;fileToPublishHasHeaderRow</p>
</td>
      <td style='text-align: left;'><p>true</p>
</td>
      <td style='text-align: left;'><p>Set this to true if the file to publish has a header row, otherwise set
it to false</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-i *</p>
</td>
      <td style='text-align: left;'><p>&#8211;datasetID</p>
</td>
      <td style='text-align: left;'><p>m985-ywaw</p>
</td>
      <td style='text-align: left;'><p>The dataset identifier to publish to.</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-m</p>
</td>
      <td style='text-align: left;'><p>&#8211;publishMethod</p>
</td>
      <td style='text-align: left;'><p>replace</p>
</td>
      <td style='text-align: left;'><p>Specifies the publish method to use (replace, upsert, append, and delete
are the only acceptable values, for details on the publishing methods
refer to Step 3 of the Setup a Standard Job (GUI)</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-ph</p>
</td>
      <td style='text-align: left;'><p>&#8211;publishViaHttp</p>
</td>
      <td style='text-align: left;'><p>true</p>
</td>
      <td style='text-align: left;'><p>Set this to true to use HTTP (rather than FTP or Soda2); This is the
preferred method because is highly efficient and can reliably handle
very large files (1 million+ rows). If false and &#8211;publishViaFTP is
false, perform the dataset update using Soda2. (false is the default
value)</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-pf</p>
</td>
      <td style='text-align: left;'><p>&#8211;publishViaFTP</p>
</td>
      <td style='text-align: left;'><p>true</p>
</td>
      <td style='text-align: left;'><p>Set this to true to use FTP (currently only works for replace). If false
and &#8211;publishViaHttp is false,perform the dataset update using Soda2.
(false is the default value)</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-cf</p>
</td>
      <td style='text-align: left;'><p>&#8211;pathToControlFile</p>
</td>
      <td style='text-align: left;'><p>/Users/home/control.json</p>
</td>
      <td style='text-align: left;'><p>Specifies a control file&gt; that configures HTTP and ‘replace via FTP’
jobs. Only required when &#8211;publishViaHttp or &#8211;publishViaFTP is set to
true. When this flag is set the &#8211;fileToPublishHasHeaderRow and
&#8211;publishMethod flags are overridden by the settings in the supplied
control file.</p>
</td>
    </tr>
    <tr>
      <td style='text-align: left;'><p>-t *</p>
</td>
      <td style='text-align: left;'><p>&#8211;jobType</p>
</td>
      <td style='text-align: left;'><p>LoadPreferences</p>
</td>
      <td style='text-align: left;'><p>Specifies the type of job to run (IntegrationJob, LoadPreferences and
PortJob are the only acceptable values)</p>
</td>
    </tr>
  </tbody>
</table></div>
<div class="section" id="step-3-job-output">
<h2>Step 3: Job Output<a class="headerlink" href="#step-3-job-output" title="Permalink to this headline">¶</a></h2>
<p>Information about the status of the job will be output to STDOUT. If the
job runs successfully a ‘Success’ message will be output to STDOUT and
the job will exit with a normal status code (0). If there was a problem
running the job a detailed error message will be output to STDERR and
the program will exit with an error status code (1). You can capture the
exit code to configure error handling logic within your ETL process.</p>
</div>
<div class="section" id="complete-example-job">
<h2>Complete example job<a class="headerlink" href="#complete-example-job" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="o">&lt;</span><span class="n">DATASYNC_JAR</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">c</span> <span class="n">config</span><span class="o">.</span><span class="n">json</span> <span class="o">-</span><span class="n">f</span> <span class="n">business_licenses_2014</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mf">10.</span><span class="n">csv</span> <span class="o">-</span><span class="n">h</span> <span class="n">true</span> <span class="o">-</span><span class="n">i</span> <span class="mi">7</span><span class="n">tgi</span><span class="o">-</span><span class="n">grrk</span> <span class="o">-</span><span class="n">m</span> <span class="n">replace</span> <span class="o">-</span><span class="n">pf</span> <span class="n">true</span> <span class="o">-</span><span class="n">sc</span> <span class="n">control</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>config.json contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;domain&quot;</span><span class="p">:</span> <span class="s2">&quot;https://opendata.socrata.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;publisher@opendata.socrata.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;secret_password&quot;</span><span class="p">,</span>
    <span class="s2">&quot;appToken&quot;</span><span class="p">:</span> <span class="s2">&quot;fPsJQRDYN9KqZOgEZWyjoa1SG&quot;</span><span class="p">,</span>
    <span class="s2">&quot;adminEmail&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;emailUponError&quot;</span><span class="p">:</span> <span class="s2">&quot;false&quot;</span><span class="p">,</span>
    <span class="s2">&quot;logDatasetID&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;outgoingMailServer&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smtpPort&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sslPort&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smtpUsername&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;smtpPassword&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>control.json contents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;action&quot;</span> <span class="p">:</span> <span class="s2">&quot;Replace&quot;</span><span class="p">,</span>
  <span class="s2">&quot;csv&quot;</span> <span class="p">:</span>
    <span class="p">{</span>
      <span class="s2">&quot;useSocrataGeocoding&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;columns&quot;</span> <span class="p">:</span> <span class="n">null</span><span class="p">,</span>
      <span class="s2">&quot;skip&quot;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;fixedTimestampFormat&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ISO8601&quot;</span><span class="p">,</span><span class="s2">&quot;MM/dd/yy&quot;</span><span class="p">,</span><span class="s2">&quot;MM/dd/yyyy&quot;</span><span class="p">],</span>
      <span class="s2">&quot;floatingTimestampFormat&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;ISO8601&quot;</span><span class="p">,</span><span class="s2">&quot;MM/dd/yy&quot;</span><span class="p">,</span><span class="s2">&quot;MM/dd/yyyy&quot;</span><span class="p">],</span>
      <span class="s2">&quot;timezone&quot;</span> <span class="p">:</span> <span class="s2">&quot;UTC&quot;</span><span class="p">,</span>
      <span class="s2">&quot;separator&quot;</span> <span class="p">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
      <span class="s2">&quot;quote&quot;</span> <span class="p">:</span> <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="s2">&quot;encoding&quot;</span> <span class="p">:</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
      <span class="s2">&quot;emptyTextIsNull&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;trimWhitespace&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;trimServerWhitespace&quot;</span> <span class="p">:</span> <span class="n">true</span><span class="p">,</span>
      <span class="s2">&quot;overrides&quot;</span> <span class="p">:</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Running a previously saved job file (.sij file)</strong></p>
<p>Simply run:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="o">&lt;</span><span class="n">DATASYNC_JAR</span><span class="o">&gt;</span> <span class="o">&lt;.</span><span class="n">sij</span> <span class="n">FILE</span> <span class="n">TO</span> <span class="n">RUN</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">java</span> <span class="o">-</span><span class="n">jar</span> <span class="n">D</span><span class="o">&lt;</span><span class="n">DATASYNC_JAR</span><span class="o">&gt;</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">john</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">business_licenses</span><span class="o">.</span><span class="n">sij</span>
</pre></div>
</div>
<p><strong>NOTE:</strong> you can also create an .sij file directly (rather than saving
a job using the DataSync UI) which stores the job details in JSON
format. Here is an example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>{
    &quot;datasetID&quot; : &quot;2bw7-dr67&quot;,
    &quot;fileToPublish&quot; : &quot;/Users/john/Desktop/building_permits_2014-12-05.csv&quot;,
    &quot;publishMethod&quot; : &quot;replace&quot;,
    &quot;fileToPublishHasHeaderRow&quot; : true,
    “publishViaFTP” : true,
    “pathToFTPControlFile” : “/Users/john/Desktop/building_permits_control.json”
}
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="setup-port-job.html" class="btn btn-neutral float-right" title="Setup Port Job" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setup-standard-job.html" class="btn btn-neutral" title="Setup Standard Job" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Socrata.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'pre-1.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>